<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîê Proof of Event (PoE) - Portal Unificado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(25, 35, 45, 0.9);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        
        header {
            padding: 25px;
            text-align: center;
            border-bottom: 1px solid #2c5364;
            background: rgba(15, 25, 35, 0.9);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0c8e0;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .tabs-container {
            display: flex;
            background: rgba(20, 30, 40, 0.9);
            border-bottom: 1px solid #2c5364;
            overflow-x: auto;
        }
        
        .tab {
            padding: 18px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #a0c8e0;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            min-width: 160px;
            justify-content: center;
        }
        
        .tab:hover {
            background: rgba(44, 83, 100, 0.3);
            color: #4facfe;
        }
        
        .tab.active {
            background: rgba(44, 83, 100, 0.7);
            color: white;
            border-bottom: 3px solid #00f2fe;
        }
        
        .tab-icon {
            font-size: 1.3rem;
        }
        
        .content-container {
            padding: 0;
            height: calc(100vh - 220px);
            min-height: 600px;
            position: relative;
        }
        
        .tab-content {
            display: none;
            height: 100%;
            width: 100%;
        }
        
        .tab-content.active {
            display: block;
        }
        
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            background-color: white;
        }
        
        .iframe-placeholder {
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
            background: rgba(30, 40, 50, 0.7);
        }
        
        .iframe-placeholder h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #4facfe;
        }
        
        .iframe-placeholder p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }
        
        .direct-link {
            display: inline-block;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 15px;
        }
        
        .direct-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }
        
        .status-info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(20, 30, 40, 0.9);
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            border-left: 4px solid #4facfe;
            max-width: 300px;
        }
        
        .footer {
            padding: 20px;
            text-align: center;
            color: #a0c8e0;
            font-size: 0.9rem;
            border-top: 1px solid #2c5364;
            background: rgba(15, 25, 35, 0.9);
        }
        
        @media (max-width: 1024px) {
            .tabs-container {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 0 0 50%;
                min-width: auto;
                padding: 15px 20px;
            }
        }
        
        @media (max-width: 768px) {
            .tabs-container {
                flex-direction: column;
            }
            
            .tab {
                flex: 1;
                padding: 15px;
                justify-content: center;
            }
            
            .content-container {
                height: calc(100vh - 280px);
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .status-info {
                position: relative;
                top: 0;
                right: 0;
                margin: 20px auto;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê Proof of Event (PoE)</h1>
            <p class="subtitle">Protocolo determin√≠stico para registrar eventos externos como fatos criptogr√°ficos ancorados no tempo. A blockchain n√£o decide. Ela testemunha.</p>
        </header>
        
        <div class="tabs-container">
            <button class="tab active" data-tab="docs">
                <span class="tab-icon">üìö</span> Documenta√ß√£o
            </button>
            <button class="tab" data-tab="endpoint">
                <span class="tab-icon">üîê</span> Endpoint - Enviar Evento
            </button>
            <button class="tab" data-tab="fuel">
                <span class="tab-icon">‚õΩ</span> PoE ‚Äì Fuel System
            </button>
            <button class="tab" data-tab="verifier">
                <span class="tab-icon">üîç</span> Verificador Off-chain
            </button>
        </div>
        
        <div class="status-info">
            <strong>Status do Sistema:</strong> 
            <span id="system-status">Carregando...</span>
        </div>
        
        <div class="content-container">
            <!-- Aba de Documenta√ß√£o -->
            <div class="tab-content active" id="docs-content">
                <div class="iframe-placeholder">
                    <h3>üìö Documenta√ß√£o do Proof of Event</h3>
                    <p>A documenta√ß√£o completa do projeto est√° dispon√≠vel no reposit√≥rio GitHub. Aqui voc√™ encontrar√° a especifica√ß√£o t√©cnica, vis√£o arquitetural, exemplos de uso e toda a informa√ß√£o necess√°ria para entender e implementar o protocolo PoE.</p>
                    <p>O PoE √© dividido em <strong>camadas estritamente desacopladas</strong> onde a valida√ß√£o, auditoria e verifica√ß√£o ocorrem fora do sistema, e o protocolo serve apenas para certifica√ß√£o temporal determin√≠stica.</p>
                    <a href="https://github.com/armanfm/proof-of-event" target="_blank" class="direct-link">Abrir Reposit√≥rio GitHub</a>
                </div>
            </div>
            
            <!-- Aba de Endpoint -->
            <div class="tab-content" id="endpoint-content">
                <iframe src="https://blockchain-fragrant-sun-237.fly.dev/poe_producao.html" title="PoE Endpoint - Enviar Evento" id="endpoint-iframe"></iframe>
            </div>
            
            <!-- Aba de Fuel System -->
            <div class="tab-content" id="fuel-content">
                <iframe src="https://blockchain-fragrant-sun-237.fly.dev/" title="PoE Fuel System" id="fuel-iframe"></iframe>
            </div>
            
            <!-- NOVA ABA: Verificador Off-chain -->
            <div class="tab-content" id="verifier-content">
                <iframe src="https://terra-dourada-brands.fly.dev/" title="PoE Verificador Off-chain" id="verifier-iframe"></iframe>
            </div>
        </div>
        
        <div class="footer">
            <p>Proof of Event (PoE) - Protocolo de certifica√ß√£o temporal determin√≠stica | 
                <span id="current-date">2026-02-03</span>
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos das abas
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const systemStatus = document.getElementById('system-status');
            
            // Configurar data atual
            const currentDate = new Date();
            document.getElementById('current-date').textContent = currentDate.toISOString().split('T')[0];
            
            // Fun√ß√£o para verificar status dos endpoints
            async function checkSystemStatus() {
                const endpoints = [
                    { url: 'https://blockchain-fragrant-sun-237.fly.dev/poe_producao.html', name: 'Endpoint' },
                    { url: 'https://blockchain-fragrant-sun-237.fly.dev/', name: 'Fuel System' },
                    { url: 'https://terra-dourada-brands.fly.dev/', name: 'Verificador' }
                ];
                
                let allOnline = true;
                let statusText = '';
                
                for (const endpoint of endpoints) {
                    try {
                        const response = await fetch(endpoint.url, { 
                            method: 'HEAD',
                            mode: 'no-cors',
                            cache: 'no-cache'
                        });
                        // Como estamos usando no-cors, n√£o podemos verificar o status da resposta
                        // Mas se n√£o houver erro na requisi√ß√£o, assumimos que est√° online
                        statusText += `‚úÖ ${endpoint.name} `;
                    } catch (error) {
                        allOnline = false;
                        statusText += `‚ùå ${endpoint.name} `;
                    }
                }
                
                if (allOnline) {
                    systemStatus.innerHTML = `<span style="color: #4facfe;">${statusText}</span>`;
                } else {
                    systemStatus.innerHTML = `<span style="color: #ff6b6b;">${statusText}</span>`;
                }
            }
            
            // Verificar status ao carregar
            checkSystemStatus();
            
            // Adicionar eventos de clique √†s abas
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remover classe active de todas as abas
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Adicionar classe active √† aba clicada
                    tab.classList.add('active');
                    
                    // Mostrar o conte√∫do correspondente
                    document.getElementById(`${tabId}-content`).classList.add('active');
                    
                    // Recarregar iframes quando a aba √© ativada
                    const iframeId = `${tabId}-iframe`;
                    const iframe = document.getElementById(iframeId);
                    if (iframe) {
                        iframe.src = iframe.src;
                    }
                });
            });
            
            // Adicionar bot√£o de recarregar no iframe em caso de erro
            document.querySelectorAll('iframe').forEach(iframe => {
                iframe.addEventListener('load', function() {
                    // Verificar se o iframe carregou corretamente
                    try {
                        // Tentar acessar o conte√∫do do iframe
                        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                        
                        // Verificar se h√° erros de conex√£o no conte√∫do
                        if (iframeDoc.body && iframeDoc.body.innerHTML.includes('Erro de conex√£o') || 
                            iframeDoc.body.innerHTML.includes('Desconectado')) {
                            console.log('Erro detectado no iframe');
                        }
                    } catch (e) {
                        // Erro de pol√≠tica de mesma origem - n√£o podemos acessar o conte√∫do
                        console.log('N√£o √© poss√≠vel verificar conte√∫do do iframe devido a pol√≠ticas de seguran√ßa');
                    }
                });
                
                iframe.addEventListener('error', function() {
                    console.log('Erro ao carregar iframe');
                    // Poder√≠amos mostrar uma mensagem de erro aqui
                });
            });
        });
    </script>
</body>
</html>
